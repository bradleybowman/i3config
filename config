# This branch is for using i3 WM with KDE Plasma on my desktop PC

## Define the $mod and $super variables/keys

# Set mod to ALT key
set $mod Mod1

# Set super to Windows key
set $super Mod4

## Define the 'movement' keys
set $up l
set $down k
set $left j
set $right semicolon

## Define the workspaces
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

## $mod + Shift + number will move the focused window to the specified workspace
bindsym $mod+Shift+1 move container to workspace 1; workspace 1
bindsym $mod+Shift+2 move container to workspace 2; workspace 2
bindsym $mod+Shift+3 move container to workspace 3; workspace 3
bindsym $mod+Shift+4 move container to workspace 4; workspace 4
bindsym $mod+Shift+5 move container to workspace 5; workspace 5
bindsym $mod+Shift+6 move container to workspace 6; workspace 6
bindsym $mod+Shift+7 move container to workspace 7; workspace 7
bindsym $mod+Shift+8 move container to workspace 8; workspace 8
bindsym $mod+Shift+9 move container to workspace 9; workspace 9
bindsym $mod+Shift+0 move container to workspace 10; workspace 10

# Config for i3-gaps
for_window [class="^.*"] border pixel 0
gaps inner 7
gaps outer 1

###############################################################################

# Dmenu Desktop and Rofi Application Launchers. Setting the fonts to
# the Liberation family to match my other sessions

# Dmenu Desktop Only searches desktop files
bindsym $mod+Shift+d exec --no-startup-id j4-dmenu-desktop --dmenu="dmenu -i -nb '#191919' -nf '#fea63c' -sb '#fea63c' -sf '#191919' -fn 'LiberationMonoRegular:bold:pixelsize=10.5'"

# $mod + F12 brings up the rofi launcher menu in the middle of the screen
bindsym $mod+F12 exec --no-startup-id rofi -show run -sidebar-mode -font "Liberation Mono 10"

###############################################################################

# In-place restart of i3wm, preserves open windows
bindsym $mod+Shift+r restart

# Reload the i3/config configuration file
bindsym $mod+Shift+c reload

###############################################################################

# Kill focused window
bindsym $mod+Shift+q kill

# Another kill bind using the familiar ALT + F4
bindsym $mod+F4 kill

# Toggle between tiling / floating on focused window
bindsym $mod+Shift+space floating toggle

# Use left mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Change focus right home row (defined earlier)
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

# Change focus using arrow keys
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move the focused window with ALT+Shift+direction.
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Moving between workspaces using familiar ALT + Tab
# ALT + Tab = next, ALT + Shift + Tab = previous
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev

# CTRL + ALT + arrow keys, for left/right workspace switching
bindsym $mod+Ctrl+Right workspace next
bindsym $mod+Ctrl+Left workspace prev

# Automatic switching to a workspace where a window has declared 'urgent'
# status
for_window [urgent=latest] focus

###############################################################################

# Default tiling parameters and movement; some of this is mitigated by
# the use of autotiling extension

# Default orientation for new workspaces is vertical
default_orientation vertical

# Split horizontally
bindsym $mod+h split h

# Split vertically
bindsym $mod+v split v

# Fullscreen the focused tile
bindsym $mod+f fullscreen toggle

# Another fullscreen bind -- the familiar CTRL + ALT + Enter
bindsym $mod+Control+Return fullscreen toggle

# Change the focus between tiled/floating windows
bindsym $mod+space focus mode_toggle

###############################################################################

# Staring applications at boot

# Setting the background using the command stored in fehbg
exec --no-startup-id exec bash $HOME/.fehbg

# Tilda for dropdown Terminal
exec_always --no-startup-id tilda

# Autotiling-Git
exec_always --no-startup-id /usr/bin/autotiling

# Using numlockx to activate NumLock
exec_always --no-startup-id numlockx on

# Start picom compositing
exec_always --no-startup-id picom --backend glx --experimental-backends --config ~/.config/i3/picom.conf -bc

##############################################################################

# Application keyboard shortcuts

# $mod + Return is Konsole
bindsym $mod+Return exec --no-startup-id konsole;focus

# $mod + CTRL + T gives Terminator
bindsym control+$mod+t exec --no-startup-id terminator;focus

# Open a Dolphin (file manager) window
bindsym $mod+Shift+Return exec --no-startup-id dolphin;focus

# KSysGuard on CTRL + Shift + ESC like Windows Task Manager
bindsym control+Shift+Escape exec --no-startup-id ksysguard;focus

# Allow floating for some classes of windows
for_window [title="Copying"] floating enable
for_window [title="Deleting"] floating enable
for_window [title="Moving"] floating enable
for_window [title="^Terminator Preferences$"] floating enable
for_window [window_role="pop-up"] floating enable
for_window [window_role="^Preferences$"] floating enable
for_window [window_role="setup"] floating enable

# Give focus for some classes of windows; i.e. terminals in this case
for_window [class="Konsole"] focus
for_window [class="tilda"] focus
for_window [class="Terminator"] focus
for_window [class="xterm"] focus

# Popups during fullscreen mode (not really sure what 'smart' implies)
popup_during_fullscreen smart

# Plasma compatibility improvements
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [class="yakuake"] floating enable
for_window [class="systemsettings"] floating enable
for_window [class="plasmashell"] floating enable;
for_window [class="Plasma"] floating enable; border none
for_window [title="plasma-desktop"] floating enable; border none
for_window [title="win7"] floating enable; border none
for_window [class="krunner"] floating enable; border none
for_window [class="Kmix"] floating enable; border none
for_window [class="Klipper"] floating enable; border none
for_window [class="Plasmoidviewer"] floating enable; border none
for_window [class="(?i)*nextcloud*"] floating disable
for_window [class="plasmashell" window_type="notification"] border none, move right 750px, move down 450px
no_focus [class="plasmashell" window_type="notification"]

# Kill the existing window that covers the screen on login (sometimes)
for_window [title="Desktop â€” Plasma"] kill; floating enable; border none

# Using plasma's logout screen
bindsym $mod+Shift+e exec --no-startup-id qdbus org.kde.ksmserver /KSMServer org.kde.KSMServerInterface.logout -1 -1 -1
